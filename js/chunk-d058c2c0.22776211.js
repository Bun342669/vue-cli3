(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d058c2c0"],{8418:function(t,e,s){"use strict";var a=s("c04e"),o=s("9bf2"),r=s("5c6c");t.exports=function(t,e,s){var n=a(e);n in t?o.f(t,n,r(0,s)):t[n]=s}},"99af":function(t,e,s){"use strict";var a=s("23e7"),o=s("d039"),r=s("e8b5"),n=s("861d"),i=s("7b0b"),c=s("50c4"),l=s("8418"),u=s("65f0"),d=s("1dde"),m=s("b622"),p=s("2d00"),f=m("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",h=p>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),_=d("concat"),C=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:r(t)},b=!h||!_;a({target:"Array",proto:!0,forced:b},{concat:function(t){var e,s,a,o,r,n=i(this),d=u(n,0),m=0;for(e=-1,a=arguments.length;e<a;e++)if(r=-1===e?n:arguments[e],C(r)){if(o=c(r.length),m+o>v)throw TypeError(g);for(s=0;s<o;s++,m++)s in r&&l(d,m,r[s])}else{if(m>=v)throw TypeError(g);l(d,m++,r)}return d.length=m,d}})},a95e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),s("div",{staticClass:"my-5 row justify-content-center",staticStyle:{display:"flex",margin:"0 auto"}},[s("div",{staticClass:"my-5 row justify-content-center w-50"},[s("table",{staticClass:"table mt-4 "},[t._m(0),s("tbody",t._l(t.shoppingcart.carts,(function(e){return s("tr",{key:e.id},[s("td",{staticClass:"align-middle "},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(e.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"text-nowrap"},[t._v(t._s(e.product.title)+" "),e.coupon?s("div",{staticClass:"text-success "},[t._v(" 已套用優惠券 ")]):t._e()]),s("td",[s("span",{staticClass:"px-3"},[t._v(t._s(e.qty))])]),s("td",[t._v(t._s(e.final_total))])])})),0),s("tfoot",[s("tr",[s("td"),s("td",[t._v("總計")]),s("td"),s("td",[t._v(t._s(t.shoppingcart.total))])]),t.shoppingcart.final_total!==t.shoppingcart.total?s("tr",[s("td"),s("td",{staticClass:"text-success"},[t._v("折扣價")]),s("td"),s("td",{staticClass:"text-success"},[t._v(t._s(t.shoppingcart.final_total))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"優惠碼請輸入: Thankyou"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v(" 套用優惠碼 ")])])])])]),s("div",{staticClass:"my-5 row justify-content-center mx-0"},[s("validation-observer",{staticClass:"col-md-6",scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid;return[s("form",{on:{submit:function(e){return e.preventDefault(),t.createorder(e)}}},[s("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,o=e.classes;return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:o,attrs:{id:"email",type:"email",name:"email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])])]}}],null,!0)}),s("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,o=e.classes;return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:o,attrs:{id:"username",type:"text",name:"收件人姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])])]}}],null,!0)}),s("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,o=e.classes;return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:o,attrs:{id:"usertel",type:"tel",name:"收件人電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])])]}}],null,!0)}),s("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,o=e.classes;return[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:o,attrs:{id:"useraddress",type:"text",name:"收件人地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])])]}}],null,!0)}),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[t._v("留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-danger",attrs:{disabled:a}},[t._v("送出訂單")])])],1)]}}])})],1)],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th"),s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",{staticClass:"text-nowrap"},[t._v("單價")])])])}],r=(s("99af"),{data:function(){return{isLoading:!1,shoppingcart:[],coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{removeCartItem:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dessert342669","/cart/").concat(t),s=this;s.isLoading=!0,this.$http.delete(e).then((function(){s.getCart(),s.isLoading=!1}))},createorder:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("dessert342669","/order"),e=this,s=e.form;e.isLoading=!0,this.$http.post(t,{data:s}).then((function(t){console.log("訂單已建立",t),t.data.success&&e.$router.push("customercheckout/".concat(t.data.orderId)),e.isLoading=!1}))},getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("dessert342669","/cart"),e=this;e.isLoading=!0,this.$http.get(t).then((function(t){e.shoppingcart=t.data.data,e.isLoading=!1}))},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("dessert342669","/coupon"),s=this,a={code:s.coupon_code};s.isLoading=!0,this.$http.post(e,{data:a}).then((function(e){e.data.success?(s.getCart(),s.isLoading=!1):(t.$bus.$emit("message:push","優惠碼輸入錯誤","danger"),s.isLoading=!1)}))}},created:function(){this.getCart()}}),n=r,i=s("2877"),c=Object(i["a"])(n,a,o,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-d058c2c0.22776211.js.map